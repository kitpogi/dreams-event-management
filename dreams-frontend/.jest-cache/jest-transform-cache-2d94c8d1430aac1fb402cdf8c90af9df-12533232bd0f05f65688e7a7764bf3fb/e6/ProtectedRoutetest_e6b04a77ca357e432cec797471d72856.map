{"version":3,"names":["_getJestObj","mock","mockAxios","get","jest","fn","post","interceptors","request","use","response","__esModule","default","useAuth","mockUseAuthReturn","AuthProvider","children","_react","require","_reactRouterDom","_ProtectedRoute","_interopRequireDefault","authContext","_interopRequireWildcard","_jsxRuntime","e","t","WeakMap","r","n","o","i","f","__proto__","has","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","isAuthenticated","isAdmin","loading","describe","TestComponent","jsx","beforeEach","clearAllMocks","localStorage","clear","it","assign","render","MemoryRouter","expect","screen","getByText","toBeInTheDocument","queryByText","not","initialEntries","requireAdmin"],"sources":["ProtectedRoute.test.jsx"],"sourcesContent":["// Mock axios before any imports\r\njest.mock('../../../api/axios', () => {\r\n  const mockAxios = {\r\n    get: jest.fn(),\r\n    post: jest.fn(),\r\n    interceptors: {\r\n      request: { use: jest.fn() },\r\n      response: { use: jest.fn() },\r\n    },\r\n  };\r\n  return {\r\n    __esModule: true,\r\n    default: mockAxios,\r\n  };\r\n});\r\n\r\n// Mock the auth context\r\nconst mockUseAuthReturn = {\r\n  isAuthenticated: false,\r\n  isAdmin: false,\r\n  loading: false,\r\n};\r\n\r\njest.mock('../../../context/AuthContext', () => ({\r\n  useAuth: jest.fn(() => mockUseAuthReturn),\r\n  AuthProvider: ({ children }) => children,\r\n}));\r\n\r\nimport { render, screen } from '@testing-library/react';\r\nimport { MemoryRouter } from 'react-router-dom';\r\nimport ProtectedRoute from '../ProtectedRoute';\r\nimport * as authContext from '../../../context/AuthContext';\r\n\r\ndescribe('ProtectedRoute Component', () => {\r\n  const TestComponent = () => <div>Protected Content</div>;\r\n\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    localStorage.clear();\r\n  });\r\n\r\n  it('renders loading state when auth is loading', () => {\r\n    Object.assign(mockUseAuthReturn, {\r\n      isAuthenticated: false,\r\n      isAdmin: false,\r\n      loading: true,\r\n    });\r\n\r\n    render(\r\n      <MemoryRouter>\r\n        <ProtectedRoute>\r\n          <TestComponent />\r\n        </ProtectedRoute>\r\n      </MemoryRouter>\r\n    );\r\n\r\n    expect(screen.getByText('Loading...')).toBeInTheDocument();\r\n    expect(screen.queryByText('Protected Content')).not.toBeInTheDocument();\r\n  });\r\n\r\n  it('redirects to login when user is not authenticated', () => {\r\n    Object.assign(mockUseAuthReturn, {\r\n      isAuthenticated: false,\r\n      isAdmin: false,\r\n      loading: false,\r\n    });\r\n\r\n    render(\r\n      <MemoryRouter initialEntries={['/protected']}>\r\n        <ProtectedRoute>\r\n          <TestComponent />\r\n        </ProtectedRoute>\r\n      </MemoryRouter>\r\n    );\r\n\r\n    expect(screen.queryByText('Protected Content')).not.toBeInTheDocument();\r\n  });\r\n\r\n  it('renders children when user is authenticated', () => {\r\n    Object.assign(mockUseAuthReturn, {\r\n      isAuthenticated: true,\r\n      isAdmin: false,\r\n      loading: false,\r\n    });\r\n\r\n    render(\r\n      <MemoryRouter>\r\n        <ProtectedRoute>\r\n          <TestComponent />\r\n        </ProtectedRoute>\r\n      </MemoryRouter>\r\n    );\r\n\r\n    expect(screen.getByText('Protected Content')).toBeInTheDocument();\r\n  });\r\n\r\n  it('renders children when user is authenticated and admin route is not required', () => {\r\n    Object.assign(mockUseAuthReturn, {\r\n      isAuthenticated: true,\r\n      isAdmin: false,\r\n      loading: false,\r\n    });\r\n\r\n    render(\r\n      <MemoryRouter>\r\n        <ProtectedRoute requireAdmin={false}>\r\n          <TestComponent />\r\n        </ProtectedRoute>\r\n      </MemoryRouter>\r\n    );\r\n\r\n    expect(screen.getByText('Protected Content')).toBeInTheDocument();\r\n  });\r\n\r\n  it('renders children when user is authenticated admin and admin route is required', () => {\r\n    Object.assign(mockUseAuthReturn, {\r\n      isAuthenticated: true,\r\n      isAdmin: true,\r\n      loading: false,\r\n    });\r\n\r\n    render(\r\n      <MemoryRouter>\r\n        <ProtectedRoute requireAdmin={true}>\r\n          <TestComponent />\r\n        </ProtectedRoute>\r\n      </MemoryRouter>\r\n    );\r\n\r\n    expect(screen.getByText('Protected Content')).toBeInTheDocument();\r\n  });\r\n\r\n  it('redirects non-admin users when admin route is required', () => {\r\n    Object.assign(mockUseAuthReturn, {\r\n      isAuthenticated: true,\r\n      isAdmin: false,\r\n      loading: false,\r\n    });\r\n\r\n    render(\r\n      <MemoryRouter initialEntries={['/admin']}>\r\n        <ProtectedRoute requireAdmin={true}>\r\n          <TestComponent />\r\n        </ProtectedRoute>\r\n      </MemoryRouter>\r\n    );\r\n\r\n    expect(screen.queryByText('Protected Content')).not.toBeInTheDocument();\r\n  });\r\n\r\n  it('allows coordinator users to access admin routes', () => {\r\n    Object.assign(mockUseAuthReturn, {\r\n      isAuthenticated: true,\r\n      isAdmin: true, // Coordinators have admin privileges\r\n      loading: false,\r\n    });\r\n\r\n    render(\r\n      <MemoryRouter>\r\n        <ProtectedRoute requireAdmin={true}>\r\n          <TestComponent />\r\n        </ProtectedRoute>\r\n      </MemoryRouter>\r\n    );\r\n\r\n    expect(screen.getByText('Protected Content')).toBeInTheDocument();\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}