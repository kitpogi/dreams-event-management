{"version":3,"names":["_getJestObj","mock","mockAxios","get","jest","fn","post","interceptors","request","use","response","__esModule","default","_authService","require","_axios","_interopRequireDefault","e","describe","beforeEach","clearAllMocks","it","email","password","mockResponse","data","token","user","id","role","api","mockResolvedValueOnce","result","authService","login","expect","toHaveBeenCalledWith","toHaveBeenCalledTimes","toEqual","mockError","status","message","mockRejectedValueOnce","rejects","userData","name","password_confirmation","register","errors","logout","getCurrentUser"],"sources":["authService.test.js"],"sourcesContent":["import { authService } from '../authService';\r\nimport api from '../../axios';\r\n\r\n// Mock the axios instance\r\njest.mock('../../axios', () => {\r\n  const mockAxios = {\r\n    get: jest.fn(),\r\n    post: jest.fn(),\r\n    interceptors: {\r\n      request: { use: jest.fn() },\r\n      response: { use: jest.fn() },\r\n    },\r\n  };\r\n  return {\r\n    __esModule: true,\r\n    default: mockAxios,\r\n  };\r\n});\r\n\r\ndescribe('authService', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('login', () => {\r\n    it('should call POST /auth/login with email and password', async () => {\r\n      const email = 'test@example.com';\r\n      const password = 'password123';\r\n      const mockResponse = {\r\n        data: {\r\n          token: 'test-token',\r\n          user: { id: 1, email, role: 'client' },\r\n        },\r\n      };\r\n\r\n      api.post.mockResolvedValueOnce(mockResponse);\r\n\r\n      const result = await authService.login(email, password);\r\n\r\n      expect(api.post).toHaveBeenCalledWith('/auth/login', { email, password });\r\n      expect(api.post).toHaveBeenCalledTimes(1);\r\n      expect(result).toEqual(mockResponse);\r\n    });\r\n\r\n    it('should handle login errors', async () => {\r\n      const email = 'test@example.com';\r\n      const password = 'wrongpassword';\r\n      const mockError = {\r\n        response: {\r\n          status: 401,\r\n          data: { message: 'Invalid credentials' },\r\n        },\r\n      };\r\n\r\n      api.post.mockRejectedValueOnce(mockError);\r\n\r\n      await expect(authService.login(email, password)).rejects.toEqual(mockError);\r\n      expect(api.post).toHaveBeenCalledWith('/auth/login', { email, password });\r\n    });\r\n  });\r\n\r\n  describe('register', () => {\r\n    it('should call POST /auth/register with user data', async () => {\r\n      const userData = {\r\n        name: 'New User',\r\n        email: 'new@example.com',\r\n        password: 'password123',\r\n        password_confirmation: 'password123',\r\n      };\r\n      const mockResponse = {\r\n        data: {\r\n          token: 'test-token',\r\n          user: { id: 1, ...userData },\r\n          message: 'Registration successful',\r\n        },\r\n      };\r\n\r\n      api.post.mockResolvedValueOnce(mockResponse);\r\n\r\n      const result = await authService.register(userData);\r\n\r\n      expect(api.post).toHaveBeenCalledWith('/auth/register', userData);\r\n      expect(api.post).toHaveBeenCalledTimes(1);\r\n      expect(result).toEqual(mockResponse);\r\n    });\r\n\r\n    it('should handle registration errors', async () => {\r\n      const userData = {\r\n        name: 'New User',\r\n        email: 'existing@example.com',\r\n        password: 'password123',\r\n      };\r\n      const mockError = {\r\n        response: {\r\n          status: 422,\r\n          data: {\r\n            errors: {\r\n              email: ['The email has already been taken'],\r\n            },\r\n          },\r\n        },\r\n      };\r\n\r\n      api.post.mockRejectedValueOnce(mockError);\r\n\r\n      await expect(authService.register(userData)).rejects.toEqual(mockError);\r\n      expect(api.post).toHaveBeenCalledWith('/auth/register', userData);\r\n    });\r\n  });\r\n\r\n  describe('logout', () => {\r\n    it('should call POST /auth/logout', async () => {\r\n      const mockResponse = { data: { message: 'Logged out successfully' } };\r\n\r\n      api.post.mockResolvedValueOnce(mockResponse);\r\n\r\n      const result = await authService.logout();\r\n\r\n      expect(api.post).toHaveBeenCalledWith('/auth/logout');\r\n      expect(api.post).toHaveBeenCalledTimes(1);\r\n      expect(result).toEqual(mockResponse);\r\n    });\r\n\r\n    it('should handle logout errors gracefully', async () => {\r\n      const mockError = {\r\n        response: {\r\n          status: 500,\r\n          data: { message: 'Server error' },\r\n        },\r\n      };\r\n\r\n      api.post.mockRejectedValueOnce(mockError);\r\n\r\n      await expect(authService.logout()).rejects.toEqual(mockError);\r\n      expect(api.post).toHaveBeenCalledWith('/auth/logout');\r\n    });\r\n  });\r\n\r\n  describe('getCurrentUser', () => {\r\n    it('should call GET /auth/me', async () => {\r\n      const mockResponse = {\r\n        data: {\r\n          id: 1,\r\n          email: 'test@example.com',\r\n          role: 'client',\r\n        },\r\n      };\r\n\r\n      api.get.mockResolvedValueOnce(mockResponse);\r\n\r\n      const result = await authService.getCurrentUser();\r\n\r\n      expect(api.get).toHaveBeenCalledWith('/auth/me');\r\n      expect(api.get).toHaveBeenCalledTimes(1);\r\n      expect(result).toEqual(mockResponse);\r\n    });\r\n\r\n    it('should handle getCurrentUser errors', async () => {\r\n      const mockError = {\r\n        response: {\r\n          status: 401,\r\n          data: { message: 'Unauthorized' },\r\n        },\r\n      };\r\n\r\n      api.get.mockRejectedValueOnce(mockError);\r\n\r\n      await expect(authService.getCurrentUser()).rejects.toEqual(mockError);\r\n      expect(api.get).toHaveBeenCalledWith('/auth/me');\r\n    });\r\n  });\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]}